<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/_head.ejs', {title: 'Registrace'}) %>
</head>
<body class="central-body">
    <%- include('partials/_navbar', { currentPage: 'register' }) %>

    <div class="main-container">
        <div class="card login-card">
            <div class="card-body">
                <h3 class="card-title text-center mb-4">Registrace</h3>
                <% if (error) { %>
                    <div class="alert alert-danger"><%= error %></div>
                <% } %>
                <form action="/register" method="POST">
                    <div class="mb-3">
                        <label for="username" class="form-label">Uživatelské jméno</label>
                        <input type="text" class="form-control" id="username" name="username" required>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email" required pattern="^[^@\s]+@[^@\s]+\.[^@\s]+$" title="Zadejte platný email">
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Heslo</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="password" name="password" required>
                            <button class="input-group-text border-start-0 bg-white" type="button" id="togglePassword" tabindex="-1" style="border-radius: 0 0.375rem 0.375rem 0; border-left: none; padding: 0 0.75rem;">
                                <i class="fa fa-eye" aria-hidden="true"></i>
                            </button>
                        </div>
                        <small class="form-text text-muted">
                            Heslo musí mít alespoň 6 znaků, obsahovat alespoň jedno velké písmeno, jedno číslo a jeden speciální znak.
                        </small>
                    </div>
                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">Potvrzení hesla</label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required>
                            <button class="input-group-text border-start-0 bg-white" type="button" id="toggleConfirmPassword" tabindex="-1" style="border-radius: 0 0.375rem 0.375rem 0; border-left: none; padding: 0 0.75rem;">
                                <i class="fa fa-eye" aria-hidden="true"></i>
                            </button>
                        </div>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">Registrovat</button>
                    </div>
                </form>
                <div class="text-center mt-3">
                    <p>Máte již účet? <a href="/login">Přihlaste se</a></p>
                </div>
            </div>
        </div>
    </div>

    <%- include('partials/_footer') %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script>
        function setupHoldToShow(inputId, buttonId) {
            const input = document.getElementById(inputId);
            const button = document.getElementById(buttonId);
            const icon = button.querySelector('i');
            button.addEventListener('mousedown', function () {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            });
            button.addEventListener('mouseup', function () {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            });
            button.addEventListener('mouseleave', function () {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            });
            button.addEventListener('touchstart', function () {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            });
            button.addEventListener('touchend', function () {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            });
        }
        setupHoldToShow('password', 'togglePassword');
        setupHoldToShow('confirmPassword', 'toggleConfirmPassword');
    </script>
</body>
</html> 