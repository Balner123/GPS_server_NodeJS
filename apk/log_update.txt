2025-11-16
- Handshake now executes without requiring a session cookie; Cookie header is attached only when present (HandshakeManager.kt).
- Telemetry (SyncWorker.kt) no longer skips batches when the cookie is missing, conditionally sets the Cookie header, and filters optional fields to meet validator ranges (e.g., accuracy >= 0).
- TURN_OFF parity: LocationService listens for a local STOP broadcast so PowerController can stop the foreground service just like the manual toggle, ensuring the service actually shuts down and reports OFF state.
2025-11-16
- Added raw response logging for both handshake and telemetry requests so we can inspect server payloads directly in the console.
2025-11-16
- After every successful telemetry batch, SyncWorker now launches a follow-up handshake to immediately fetch power instructions (keeps APK aligned with server TURN_OFF requests).
2025-11-16
- Server-forced shutdowns now raise a persistent notification instead of the orange banner, and the banner/toast duplicates were removed (PowerController.kt, MainActivity.kt, NotificationHelper.kt).
- Console logging was simplified to structured request/response/state entries via new helpers, reducing noise from raw payload dumps (ConsoleLogger.kt, HandshakeManager.kt, SyncWorker.kt).
2025-11-16
- GPS/network resilience: LocationService now watches connectivity, caches accurate counts from Room, shows offline + GPS-disabled push notifications, and stops itself when location providers are disabled. Offline batches keep accumulating with correct UI counts and sync resumes automatically when the network returns (LocationService.kt, LocationDao.kt, NotificationHelper.kt, StatusMessages.kt).
2025-11-16
- Added online guards: Login/registration still require connectivity to avoid crashes for unregistered devices, but the service toggle once again works offline. LocationService starts even without network and keeps showing the offline notification until connectivity returns (LoginActivity.kt, MainActivity.kt, LocationService.kt, NetworkUtils.kt).
2025-11-16
- Handshake requests are now skipped gracefully when offline; we log the skip and enqueue a constrained WorkManager retry so the app no longer crashes if a handshake is triggered without connectivity (HandshakeManager.kt).
2025-11-16
- Foreground notification text now explicitly states "GPS Tracker is running" so users see the service is active even after closing the app (LocationService.kt).

